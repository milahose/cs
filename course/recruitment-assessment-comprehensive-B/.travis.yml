language: node_js
node_js:
- 6.4.0
notifications:
  email: false
before_install:
- travis_retry nvm install 5.5.0
- if [ $TRAVIS_SECURE_ENV_VARS == "true" ]; then npm install request; npm run update-package;
  fi
env:
  global:
  - MONGO_URI=mongodb://student:ilovetesting@ds139267.mlab.com:39267/comprehensive
  - POSTGRES_URI=postgres://efeitgbt:vtyVc1GbU5CSq3-QNdu5Tf5BgHGH28wB@elmer.db.elephantsql.com:5432/efeitgbt
  - secure: 2Li9TZGvYltCB5jQiqCnb5oazU/SYtIEF2B8DU4a5rFsqMEVULUW/5fAzznmHoGQoFjC1ec9Zry8UUqHId88KwIF6hzfOIviMXgyQ6BS45yuKSqUEa/ZecK4owt8x9EK5AO9wHJ8oc6gehJJhGv7l5J+1Qt/V326M4HyHqVWSxG6UhMe63XzKuLVohNONoRu9NMt4FFrUzRa7hCTdOF+5RCt0EQl28Zin2r+T/MPlw/6b/139v3UtHUJHzUkV6/rcpHE5J7VoJs4JjCJVFlD5Sa4D3VEnAy2onQJ47qjsDpRBoyYOXWVEWCMRSr43/TU2kL2gxrwb3zkfXV5NHaQb5ApHK7zYMPrvS/Pdc7xqnnr9j6jKMUSAZnGEG+5TRgh7e5y+Qzc6H7BX/C70Bl2Xv7eWKB54dTzy1WKo+/4Ma2ocHnOAKWP2wziVU+75jIVl8qXYAJiML2xg/ysgp3RMhjtmBkrsojKHpnYfsj+KRRtn/khXM6C08SOdKNq7LmHMH4flzq8Ulhm6tlNzQCtouB0pisfWurknpNEUGQ+lYuyZ0AL7wKAa8nKZnpxOhVvb1rTOfFe0Von6QFOBzzcrT9e6ThBzzf3NdcCdaSa2eU7QB7mew7A+IhlVBZgipWGCrSx39ixrIWWSrbmahDsydX/4mqZzmVTShJzkQxhbRc=
  - secure: t0Im47SyKwSvsQMkUC0gK4TxwcapxB8AZddGjDsJ6v5nrakcq6wUbSyI3pWxX3HXfxiI7+FzV5vfLjj+V6Bue72NDadC+eurh12Y8GWe6GP9dgLRH6rYBejHwmEFE31l5Ezhn0XclcRUhmEoUZWdsEhp9CY6ePvQPhYNG9U/X9aVWCWuEYjWxgFiPmV5GtZPsaMalV1c/aaeVYs5VpQ1hI1ROkY+qyxv/1CnG1YmLrQJvyxpy0NJiYNs7XtyLt1HQjU/ur+aBw3PZYOczz6GDZkT97EzfQz3WrQ8Nuuw87izeMofyUYcgIMFgvaJx0aQ9U5nCmu7hNGHI/66nMP+YcuZLhroclo6SjZd/H93rKHEnpEHVWe4AVAcDCA8EMHxPd2gARjPRo/85QfH2exLHXiwGk0dbR113JbiXiq1VoiJdRytAT/5q8xV74nuin0ORoTHE4ag6CLP+4hhDhNTqd6LucMGMgkw7Jy3wwkRa4S8Ux0SbWsVJ9hTifHChDMtB2TFpXtDVoIhn62xsHfZ5a0zcAmfZvkLOzX0dzvBq6o5XXA6DUTUnsp0qJaShjfUUV5u1/icgu6OHMnIoxILe5ZVSlo1EWPp9V/aMAsW8svRB5DYKETytx0y4KSwDZQbJQouhvVLuHkyEwuLZMoAi0t7N7iuWut/ILdzK8nmTME=
  - secure: IRNb2OJJIuc94u9/SH1X0ePd4xOLstQ9YoDaxdvaZbXkunOCHP4y3Kl6TpB+lwDp0pbzboMeQHuMRo0i/N+r74ar3+pCGnJRIUr0TNe9W+5QkWFAdYQ12YiasXDpX/fhAvN4RtvITwvXrn/UWqIY0RKSWKBZP6Xr4PqJu6iIQnW5xCQ0++ZQjzlLyk6noC+xhoZSfRViuRArC1MHPLXvNvLT1Xb2UlxNCot3ZOitVW/7z9YLB4ig8p2nQsSrZizngNWKTuVRXti2ObTO3Np0/gsxSCeZmyhysxVx5VQtg3jG4cw2xbW+r27e3U2n0n6h/ki+0O7+ePUEEPXQjmYzoxItIljufcIFwOZXCphNKegmL7nkjVFkCzetjoBorfGmtRftSd9MimSz/9dxJTlU6U56TSWdLrcaX7PjiBkeV6VSCkTsnCBwaJ4ziotYm1EZORNZcysLHnYYB6HVa+vij5/JlGcgwtxTNY+kttmCsj6rTSDcSLropsLaB2UXV80++aNwT84HqeeaDe3moZgP8iHp0sQZSf0lKz1PospXrDzdMVItvIqfvk8mtW5RZn6I8mWksVo1JkI8QLNc3MkNhZIKpzPgDMw9E2XjiHlHqSHkyDrnzqnqGSWW785mHA5oF2aj060qRk3xn1FphvTGZ6/xUmxZtdCihQ6qpVmgN/0=
script:
- if [ $TRAVIS_SECURE_ENV_VARS == "true" ]; then npm run get-test-utils && npm run
  test ; npm run lint ; npm run report; else npm run merge; fi
