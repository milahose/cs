language: node_js
node_js:
  - '5.5.0'
notifications:
  email: false
before_install:
  - travis_retry nvm install 5.5.0
  - if [ $TRAVIS_SECURE_ENV_VARS == "true" ]; then
      npm install request;
      npm run update-package;
    fi
env:
  global:
    - secure: smV+Ao13Ac3wyGjKAmh+Zk5+YttuMwVlaiS1K0nlpwuaFGIRSmH74rStmdsPw4vFrfIHJNDbzAJPdHRNXWb5fps+x73Nvvv39/Hib8l5HSJbqx8j6fbv6o0sxtYGM9/1jkIYyB8xh8DBqGWlnkxS5YkQcvxEAkgYH74Srww7HF1ploPVfkf0ZU7PveF7lMYNIPGKq3xCOgxdOTbbOlvW1NHHPVeUiJVtADfFtzFXbMeJ//mWVef7+4rXYPZm7Kwe4nM4frmyXCws47ECD1MUfY17B1jaPpsuxpPKWGda9B5oILvZbzl8YX05k0Bcm3RJBh2zurTIi4+pRPXPJVXOFa/Sm6J8K26KbFSqxbMMzqNJfxxJwX0o/i9qHzzFK6M/+5IUWp52G4HX77TMhtNcAUHcUefNAVsJuQ/xcSI1ZBXuln4zG03AmwE6zTTNMIobV/10eERvZVX6JSKVeiNQdNAduyctXcKSAiUT4HGXV3a7ZIPHPL7IV5lM3Yfm1K2I3xAyeOMaBykW2pgF5zHyypbN3qNX6ViWmOgZCzm0FJ1EB4UMn/yOZD/lvfCML0+JKZzHus6WKbjNrjMWcnL5acnYSOZuyFnjLawkEcHTILgKSEGX3gFX9Vb1TEnW75PujnN7GTttiN8m/DCNRPwBhfX0LyN6I40DjV5vbp1VAKk=
    - MERGE_TOKEN=872c194d635f08bfda7c4805e70f082f152be65b
    - SENDGRID_USERNAME=azai91
    - secure: ZDHKpqwRn0y/M3D4lw//15PoiVTg285nCCrldYyubqQTjRs+9a1vfb0rrsPAnLRvqbHXix7ybAdzIH8yIghNImGcYB5GAdKiEvi2GxJRP7ONTL9CKnmtYsm2gLNIeqP+DFGk6BCXXRStCxeQwgbtu3eRzVB0Uf2w40OsHBsl9ZtrSuMrsGx7X7bdjUyO3HmwXUKwEFy2Ye17Z4RBE3wZH06/EaBLU+cMtNJJFHLHj+mxZLtVY9lvuEgTbh8Ym+ScoTGEAkS3lwC+tqG041k5pkTicsmNpTdtcd8g5y4QSS0ZFBwgUjM5SgZMQCRKxoLUIXJU8cpvfIXFDIReZUE+SQ79Fy6ICldReFyc1LbbIv1R65IIuMkf3r1tA4caDSpJGsnKwtELQhUmIopv0omDVMaueNc447zzjmvvPzOLUBzA/3UKNYfx8dff1oEoxLH/H57zfXmLltiJBkuS+FnwGy5BudKS0xxIZI5aYbGwS8Ra6aAQUWR5Nlhm7ZymImslYNeGZdbEUHrod+cKCm5ZuziPKoTu/2aDkvrpTgMin+jk+9e5sIqTD7ZcyGqfAa4l9lbqwEFsx6+FbrXmJMCQN02/sg/uUe8LCfgQ3Q3bkMBT3Ynp9O9pkwBv3++WnvAdTKxPK2GVh5rNAWCKBQbCQscxmWScPfoY2+/9VoEOO3U=
    - secure: IGk9DPXnLuVzGZg/Y2aCmKTWcxizf78KrABx9EGY7brPLANU+yJ6Z5KE/YotIvbjb+7wwNBXv7XcLanppRuW2Mz9QgWim1jBokH+nnJsEgabDjo4DBr/icDsH9CzfswvdkbE3T4jeEkPfPmP5L80XetoGwbXK4CyVYPA9A1G/jd0kanM+F9SnY/JzS1hi6YyIOtTiS8+jF3dBikBhzybR4KNsj+Svyf1C0fGNGna//XuZ7a9gyix5sgsX1JuEyEHhGgCgLzCNvb2Fsj8LeJ/fbkIS1F9oDIvWjUvITqqV8VBxA2EzIgFs5aZ4FRRB4YSik8ujAl/gXCM8qMumH5VAYZgNqUV3NOi6c8iOHpZwAsY2vkL1mxel1kjA3xVxdsuuNv02Tqp7Hpb77PrvfLjoSc5mMflD3pXjsSqbarrxOLejcprisijDLlgMMrbBlSfDMXJR6mexJDjzvFwMTqogRWtZLIYCcDP7mJJoby9fmUWSRo8xrXZbrsWTYLsr1qXJQFB6YiouP/06GphsT6WGdw93tVqXr90Bu2pnbdBo47wZObdii81IKApqr/5rAU0Sv99ucdxkJlxFWqWaXUHPvrwe+01/noGEwbp/3M43NxG0hUf8jmKC1qFNjx0lEbCGU1JDIon8fAQC2xhlNEoYF0NCibpr5/BnInkfwPdIss=
    - secure: DmKr/B8DFpMmzgEspwli6YCIpLFS6DjdpPXrKPmnATIgvYNkHgnYnAyBVZwyMRpsIfJuYfhtaEABJQYFxspfv1xFZGx4AYRSlNwXnMxKhvLoHQqiDmprGercGaoFUjJsqQlTTivj6lKoNulxEN0q5+zK/koee4k/r3591iy4sWUMSQcq5JUzkELVxwB/AtfAc8e5+mUxAs+422AKSXMdqlioCpgIzBACwNemcIr2cp8wv56aw5wt4H23RrdSRq2ot+CYcDF/LtC/xHz2trqLaMPTPcDMaNh2KC3v5PE4mXeEkfPupMJ/91Sqd3KR2/B6gw7i7fXFxAKwk0y0qI6M/UtBLpJbq2V80bs6KCFL8RG9wyLCIiw4Vc9V5nU0EhMuLs/GYrWfZOEtQG9EVhUdMw6li9VV6Xw3N8OHdm6dIv/3Q6zO5iqwz1Yk6zwBa61s9z5XDDaavIDzeqT1tD/M/SgsuoeX/pvhrzy3FIPtaOnygEG2/j14ql9A7YfQyoZsE4VSpscsIuatyStUj70vpec3NBcmNOR80sVsIKQ5ABUXWZUFtv2canbnWECrERVIbnsnBIrCxzaszOTZWqWEHu70k6PayLsrHoJPA1dzynVJxZUWRu1+naFUnU2BLJNs7KSrbLwHlQ2WDuIsESKWrko0woXc2VeFskCSQO7DSCs=
script:
  - if [ $TRAVIS_SECURE_ENV_VARS == "true" ]; then
      npm run get-test-utils && npm run test ; npm run lint ; npm run report;
    else
      npm run merge;
    fi
